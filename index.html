<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Black Hole Relativity Simulator</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Poppins:wght@300;500&display=swap');

body {
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at center, #000010, #000000);
  color: #00fff7;
  text-align: center;
  padding: 20px;
  overflow-x: hidden;
}
h1 {
  color: #00eaff;
  font-family: 'Orbitron', sans-serif;
  font-size: 2rem;
  letter-spacing: 2px;
  margin-bottom: 15px;
  text-shadow: 0 0 25px #0ff, 0 0 50px #0ff2;
}
.container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 25px;
}
.card {
  background: rgba(20, 20, 30, 0.4);
  border: 1px solid #0ff4;
  border-radius: 15px;
  box-shadow: 0 0 20px #0ff3, inset 0 0 25px #000;
  backdrop-filter: blur(10px);
  padding: 20px;
  width: 320px;
  transition: 0.3s;
}
.card:hover {
  transform: scale(1.02);
  box-shadow: 0 0 25px #0ff5;
}
label {
  display: block;
  margin-top: 10px;
  font-weight: bold;
}
input {
  width: 100%;
  background: rgba(0,0,0,0.6);
  color: #0ff;
  border: 1px solid #0ff;
  padding: 8px;
  margin-top: 5px;
  border-radius: 6px;
  font-size: 1em;
}
button {
  background: rgba(0,0,0,0.8);
  color: #0ff;
  border: 1px solid #0ff;
  padding: 12px 30px;
  margin-top: 25px;
  border-radius: 10px;
  font-size: 1.1em;
  cursor: pointer;
  transition: 0.3s;
  letter-spacing: 1px;
}
button:hover {
  background-color: #0ff;
  color: #000;
  box-shadow: 0 0 20px #0ff;
}
#output {
  white-space: pre-wrap;
  background: rgba(10, 10, 10, 0.8);
  color: #00ff95;
  padding: 15px;
  border-radius: 10px;
  border: 1px solid #0ff4;
  margin: 20px auto;
  width: 90%;
  max-width: 700px;
  text-align: left;
  box-shadow: 0 0 15px #0ff4;
}
canvas {
  display: block;
  margin: 40px auto;
  background: radial-gradient(circle at center, #000, #020010);
  border-radius: 50%;
  width: 450px;
  height: 450px;
}
</style>
</head>
<body>

<h1>üåÄ Black Hole Relativity & Time Dilation Simulator</h1>

<div class="container">
  <div class="card">
    <h3>üî¢ Basic Parameters</h3>
    <label>Mass of black hole (kg):</label>
    <input id="mass" type="number" step="any" placeholder="e.g. 5e30">
    <label>Distance from black hole (m):</label>
    <input id="distance" type="number" step="any" placeholder="e.g. 1e8">
    <label>Mode:</label>
    <input id="mode" type="number" placeholder="0 = viewer‚Üífaller, 1 = faller‚Üíviewer">
    <label>Time value (s):</label>
    <input id="timevalue" type="number" step="any" placeholder="e.g. 1200">
  </div>

  <div class="card">
    <h3>üìè Relativistic Parameters</h3>
    <label>Length Selection:</label>
    <input id="lengthselection" type="number" placeholder="0 = Viewer, 1 = Faller">
    <label>Viewer's Length (m):</label>
    <input id="viewerslength" type="number" step="any" placeholder="e.g. 2">
    <label>Faller's Length (m):</label>
    <input id="fallerslength" type="number" step="any" placeholder="e.g. 1.8">
    <label>Mass of object (kg):</label>
    <input id="objectmass" type="number" step="any" placeholder="e.g. 70">
    <label>Height (m):</label>
    <input id="height" type="number" step="any" placeholder="e.g. 1.8">
  </div>
</div>

<button onclick="calculate()">üöÄ Calculate & Simulate</button>
<canvas id="blackholeCanvas" width="500" height="500"></canvas>
<pre id="output"></pre>

<script>
// === Black Hole Visualization ===
const canvas = document.getElementById("blackholeCanvas");
const ctx = canvas.getContext("2d");
const stars = [];
for (let i = 0; i < 200; i++) {
  const angle = Math.random() * Math.PI * 2;
  const radius = 200 + Math.random() * 150;
  stars.push({ angle, radius, speed: 0.001 + Math.random() * 0.002 });
}
function drawBlackHole() {
  const w = canvas.width, h = canvas.height;
  ctx.clearRect(0, 0, w, h);
  // Background lensing glow
  const lens = ctx.createRadialGradient(w/2, h/2, 40, w/2, h/2, 250);
  lens.addColorStop(0, "rgba(0,0,0,1)");
  lens.addColorStop(0.4, "rgba(255,0,0,0.3)");
  lens.addColorStop(0.6, "rgba(255,100,0,0.1)");
  lens.addColorStop(1, "rgba(0,0,0,0)");
  ctx.fillStyle = lens;
  ctx.fillRect(0,0,w,h);
  
  // Accretion Disk
  const grad = ctx.createLinearGradient(0, h/2-10, 0, h/2+10);
  grad.addColorStop(0, "#ff8000");
  grad.addColorStop(0.5, "#ffffff");
  grad.addColorStop(1, "#ff0000");
  ctx.save();
  ctx.translate(w/2, h/2);
  ctx.rotate(Date.now()/10000);
  ctx.beginPath();
  ctx.ellipse(0, 0, 140, 30, 0, 0, Math.PI*2);
  ctx.fillStyle = grad;
  ctx.shadowBlur = 20;
  ctx.shadowColor = "#ff5500";
  ctx.fill();
  ctx.restore();

  // Event Horizon
  ctx.beginPath();
  ctx.arc(w/2, h/2, 50, 0, Math.PI*2);
  ctx.fillStyle = "black";
  ctx.shadowBlur = 35;
  ctx.shadowColor = "#00ffff";
  ctx.fill();

  // Photon ring
  ctx.beginPath();
  ctx.arc(w/2, h/2, 70, 0, Math.PI*2);
  ctx.strokeStyle = "rgba(255,150,0,0.7)";
  ctx.lineWidth = 3;
  ctx.shadowBlur = 25;
  ctx.shadowColor = "#ff8800";
  ctx.stroke();

  // Stars orbiting
  for (let s of stars) {
    s.angle += s.speed;
    const x = w/2 + s.radius * Math.cos(s.angle);
    const y = h/2 + s.radius * Math.sin(s.angle);
    const redshift = Math.sin(s.angle) > 0 ? 255 : 100; // redshift/blueshift
    const blue = Math.sin(s.angle) < 0 ? 255 : 150;
    ctx.fillStyle = `rgb(${redshift},${Math.min(redshift, blue)},${blue})`;
    ctx.fillRect(x, y, 2, 2);
  }

  requestAnimationFrame(drawBlackHole);
}
drawBlackHole();

// === Calculation ===
async function calculate() {
  const baseURL = "https://d258dadd-c73d-442d-bbcc-1570d3c8e404-00-2dx0zyosk1khh.kirk.replit.dev/blackhole";
  const M = document.getElementById('mass').value;
  const r = document.getElementById('distance').value;
  const mode = document.getElementById('mode').value;
  const timevalue = document.getElementById('timevalue').value;
  const lengthselection = document.getElementById('lengthselection').value;
  const viewerslength = document.getElementById('viewerslength').value;
  const fallerslength = document.getElementById('fallerslength').value;
  const m = document.getElementById('objectmass').value;
  const h = document.getElementById('height').value;

  if (!M || !r) {
    document.getElementById('output').innerText = "‚ö†Ô∏è Please fill in mass and distance!";
    return;
  }

  const params = new URLSearchParams({
    M: M,
    r: r,
    time: mode,
    viewerstime: mode === "0" ? timevalue : "",
    fallerstime: mode === "1" ? timevalue : "",
    lengthselection: lengthselection,
    viewerslength: lengthselection === "0" ? viewerslength : "",
    fallerslength: lengthselection === "1" ? fallerslength : "",
    m: m,
    h: h
  });

  document.getElementById('output').innerText = "‚è≥ Calculating...";

  try {
    const res = await fetch(`${baseURL}?${params.toString()}`);
    const text = await res.text();
    document.getElementById('output').innerHTML = text;
  } catch (err) {
    document.getElementById('output').innerText = "‚ùå Error: " + err.message;
  }
}
</script>
</body>
</html>
