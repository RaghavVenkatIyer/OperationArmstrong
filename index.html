<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŒ€ Black Hole Time Dilation Calculator</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #111;
    color: #eee;
    text-align: center;
    padding: 40px;
  }
  .container {
    background-color: #1c1c1c;
    padding: 30px;
    border-radius: 15px;
    width: 60%;
    margin: auto;
    box-shadow: 0px 0px 12px rgba(0,0,0,0.6);
  }
  h2 {
    color: #00bfff;
  }
  input, select {
    padding: 10px;
    margin: 10px;
    border-radius: 8px;
    border: none;
    font-size: 16px;
    width: 80%;
  }
  button {
    background-color: #00bfff;
    color: white;
    padding: 10px 18px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 16px;
    margin-top: 10px;
  }
  button:hover {
    background-color: #0099cc;
  }
  .result-box {
    background-color: #222;
    padding: 20px;
    border-radius: 10px;
    margin-top: 25px;
    font-size: 18px;
    color: #cceeff;
    white-space: pre-wrap;
  }
  img {
    margin-top: 25px;
    border-radius: 10px;
    max-width: 100%;
  }
</style>
</head>
<body>
  <div class="container">
    <h2>ðŸŒ€ Black Hole Time Dilation Calculator</h2>

    <form id="blackholeForm">
      <label><b>Choose Calculation Type:</b></label><br>
      <select id="lengthselection" required>
        <option value="0">Calculate Fallerâ€™s Time (Viewerâ€™s Time known)</option>
        <option value="1">Calculate Viewerâ€™s Time (Fallerâ€™s Time known)</option>
      </select><br>

      <label>Mass of Black Hole (kg):</label><br>
      <input type="number" id="mass" step="any" placeholder="e.g. 5e30" required><br>

      <label>Distance from Black Hole (km):</label><br>
      <input type="number" id="distance" step="any" placeholder="e.g. 10000" required><br>

      <label>Time (s):</label><br>
      <input type="number" id="time" step="any" placeholder="e.g. 10" required><br>

      <button type="submit">Calculate</button>
    </form>

    <div id="result" class="result-box" style="display:none;"></div>
    <img id="graph" src="" style="display:none;">
  </div>

  <script>
    document.getElementById("blackholeForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      const lengthselection = document.getElementById("lengthselection").value;
      const m = document.getElementById("mass").value;
      const h = document.getElementById("distance").value;
      const t = document.getElementById("time").value;

      const url = `https://dce81952-ff2f-4e10-ba0d-737c2ea0a1fc-00-2fmx6293xzfgw.worf.replit.dev/blackhole?lengthselection=${lengthselection}&m=${m}&h=${h}&t=${t}`;
      
      const res = await fetch(url);
      const html = await res.text();

      document.getElementById("result").style.display = "block";
      document.getElementById("result").innerHTML = "Loading result...";

      // Extract result and graph image from the Flask response
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, "text/html");

      const resultText = doc.querySelector("pre")?.textContent || "No result found.";
      const graphImg = doc.querySelector("img")?.src || "";

      document.getElementById("result").innerText = resultText;

      if (graphImg) {
        document.getElementById("graph").src = graphImg;
        document.getElementById("graph").style.display = "block";
      } else {
        document.getElementById("graph").style.display = "none";
      }
    });
  </script>
</body>
</html>
